<template>
  <div class="timer">

    <svg class="clock" width="100" height="100" viewBox="0 0 99 99" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g class="segment" opacity="0.2">    
	      <g> 	 
          <circle class="segment__path" cx="50" cy="50" r="45" stroke="#fff" stroke-width="10"  stroke-dasharray ="3 260" stroke-dashoffset="54" fill="none" />
        </g> 
      </g>

      <path d="M49.4983 8.35725V0.642962C49.4983 0.465442 49.3544 0.321533 49.1769 0.321533C48.9994 0.321533 48.8555 0.465442 48.8555 0.642962V8.35725C48.8555 8.53477 48.9994 8.67868 49.1769 8.67868C49.3544 8.67868 49.4983 8.53477 49.4983 8.35725Z" fill="white"/>
      <path d="M49.178 0.642857V8.35714V0.642857ZM49.8209 0.642861C49.8209 0.287819 49.5331 0 49.178 0C48.823 0 48.5352 0.287818 48.5352 0.64286V8.35714C48.5352 8.71218 48.823 9 49.178 9C49.5331 9 49.8209 8.71218 49.8209 8.35714V0.642861Z" class="line-active-1" fill="#FFBD3C"/>
      <path d="M28.9293 13.8703L25.0729 7.18896C24.9842 7.03521 24.7876 6.98251 24.6339 7.07125C24.4801 7.15999 24.4274 7.35657 24.5162 7.51032L28.3725 14.1917C28.4613 14.3454 28.6578 14.3981 28.8116 14.3094C28.9653 14.2206 29.018 14.0241 28.9293 13.8703Z" fill="white"/>
      <path d="M25.3475 7.03002C25.1701 6.72277 24.7771 6.61761 24.4699 6.79518C24.1629 6.97265 24.0578 7.36538 24.2352 7.67248L28.0927 14.3515C28.2702 14.6588 28.6631 14.7639 28.9703 14.5864C29.2774 14.4089 29.3825 14.0162 29.2051 13.7091L25.3475 7.03002Z" fill="white"/>
      <path d="M13.8656 28.9269L7.18575 25.0689C7.03204 24.9802 6.83546 25.0328 6.74668 25.1865C6.65791 25.3402 6.71055 25.5368 6.86426 25.6256L13.5441 29.4835C13.6978 29.5723 13.8944 29.5196 13.9831 29.3659C14.0719 29.2122 14.0193 29.0156 13.8656 28.9269Z" fill="white"/>
      <path d="M7.02663 25.3479L13.7059 29.2051L7.02663 25.3479ZM7.35119 24.7947C7.04409 24.6174 6.65136 24.7225 6.47389 25.0295C6.29632 25.3367 6.40148 25.7297 6.70873 25.9071L13.3878 29.7647C13.6949 29.942 14.0876 29.8369 14.2651 29.5299C14.4427 29.2227 14.3375 28.8297 14.0302 28.6523L7.35119 24.7947Z" fill="white"/>
      <path d="M8.35603 49.5H0.641741C0.464221 49.5 0.320312 49.6439 0.320312 49.8214C0.320312 49.9989 0.464221 50.1429 0.641741 50.1429H8.35603C8.53355 50.1429 8.67746 49.9989 8.67746 49.8214C8.67746 49.6439 8.53355 49.5 8.35603 49.5Z" fill="white"/>
      <path d="M9 49.8213C9 49.4663 8.71218 49.1785 8.35714 49.1785H0.642861C0.287819 49.1785 0 49.4663 0 49.8213C0 50.1764 0.287818 50.4642 0.64286 50.4642H8.35714C8.71218 50.4642 9 50.1764 9 49.8213Z" fill="white"/>
      <path d="M13.8691 70.0666L7.18851 73.9238C7.03478 74.0125 6.98211 74.2091 7.07087 74.3628C7.15963 74.5166 7.35621 74.5692 7.50994 74.4805L14.1905 70.6233C14.3442 70.5346 14.3969 70.338 14.3082 70.1843C14.2194 70.0305 14.0228 69.9779 13.8691 70.0666Z" fill="white"/>
      <path d="M14.5854 70.0295C14.4079 69.7225 14.0152 69.6174 13.7081 69.7947L7.02904 73.6523C6.72179 73.8297 6.61663 74.2227 6.7942 74.5299C6.97167 74.8369 7.36441 74.942 7.6715 74.7647L14.3506 70.9071C14.6578 70.7297 14.763 70.3367 14.5854 70.0295Z" fill="white"/>
      <path d="M28.9241 85.1326L25.067 91.8132C24.9782 91.9669 25.0309 92.1635 25.1846 92.2523C25.3383 92.341 25.5349 92.2884 25.6237 92.1346L29.4808 85.4541C29.5696 85.3003 29.5169 85.1037 29.3632 85.015C29.2094 84.9262 29.0129 84.9789 28.9241 85.1326Z" fill="white"/>
      <path d="M29.5289 84.7351C29.2217 84.5576 28.8288 84.6627 28.6513 84.97L24.7938 91.649C24.6164 91.9561 24.7215 92.3488 25.0285 92.5263C25.3357 92.7039 25.7287 92.5987 25.9061 92.2915L29.7637 85.6124C29.941 85.3053 29.836 84.9126 29.5289 84.7351Z" fill="white"/>
      <path d="M50.1429 98.3573V90.643C50.1429 90.4654 49.9989 90.3215 49.8214 90.3215C49.6439 90.3215 49.5 90.4654 49.5 90.643V98.3573C49.5 98.5348 49.6439 98.6787 49.8214 98.6787C49.9989 98.6787 50.1429 98.5348 50.1429 98.3573Z" fill="white"/>
      <path d="M49.8225 90.6429V98.3571V90.6429ZM50.4654 90.6429C50.4654 90.2878 50.1776 90 49.8225 90C49.4675 90 49.1797 90.2878 49.1797 90.6429V98.3571C49.1797 98.7122 49.4675 99 49.8225 99C50.1776 99 50.4654 98.7122 50.4654 98.3571V90.6429Z" fill="white"/>
      <path d="M74.484 91.4943L70.6276 84.813C70.5389 84.6592 70.3423 84.6065 70.1885 84.6953C70.0348 84.784 69.9821 84.9806 70.0708 85.1343L73.9272 91.8157C74.016 91.9694 74.2125 92.0221 74.3663 91.9334C74.52 91.8446 74.5727 91.6481 74.484 91.4943Z" fill="white"/>
      <path d="M70.3469 84.9728L74.2041 91.652L70.3469 84.9728ZM70.9061 84.6484C70.7287 84.3412 70.3357 84.236 70.0285 84.4136C69.7215 84.5911 69.6164 84.9838 69.7938 85.2909L73.6513 91.9699C73.8288 92.2772 74.2217 92.3823 74.5289 92.2048C74.836 92.0273 74.9411 91.6346 74.7637 91.3275L70.9061 84.6484Z" fill="white"/>
      <path d="M92.1273 73.3763L85.4475 69.5184C85.2938 69.4296 85.0972 69.4823 85.0084 69.636C84.9196 69.7897 84.9723 69.9863 85.126 70.0751L91.8058 73.933C91.9595 74.0217 92.1561 73.9691 92.2448 73.8154C92.3336 73.6617 92.281 73.4651 92.1273 73.3763Z" fill="white"/>
      <path d="M85.2948 69.795L91.9741 73.6522L85.2948 69.795ZM85.6129 69.2354C85.3058 69.0581 84.9131 69.1631 84.7356 69.4702C84.558 69.7774 84.6632 70.1703 84.9704 70.3478L91.6495 74.2053C91.9566 74.3827 92.3493 74.2776 92.5268 73.9706C92.7044 73.6634 92.5992 73.2704 92.292 73.093L85.6129 69.2354Z" fill="white"/>
      <path d="M98.356 48.8572H90.6417C90.4642 48.8572 90.3203 49.0011 90.3203 49.1786C90.3203 49.3561 90.4642 49.5 90.6417 49.5H98.356C98.5336 49.5 98.6775 49.3561 98.6775 49.1786C98.6775 49.0011 98.5336 48.8572 98.356 48.8572Z" fill="white"/>
      <path d="M99 49.1785C99 48.8235 98.7122 48.5356 98.3571 48.5356H90.6429C90.2878 48.5356 90 48.8235 90 49.1785C90 49.5335 90.2878 49.8214 90.6429 49.8214H98.3571C98.7122 49.8214 99 49.5335 99 49.1785Z" fill="white"/>
      <path d="M91.4863 24.5146L84.8057 28.3718C84.652 28.4605 84.5993 28.6571 84.6881 28.8108C84.7768 28.9646 84.9734 29.0172 85.1271 28.9285L91.8077 25.0713C91.9614 24.9826 92.0141 24.786 91.9253 24.6323C91.8366 24.4785 91.64 24.4259 91.4863 24.5146Z" fill="white"/>
      <path d="M92.2065 24.4702C92.029 24.1631 91.6363 24.0581 91.3292 24.2354L84.6501 28.093C84.3429 28.2704 84.2377 28.6634 84.4153 28.9706C84.5928 29.2776 84.9855 29.3827 85.2926 29.2053L91.9716 25.3478C92.2789 25.1703 92.3841 24.7774 92.2065 24.4702Z" class="line-active" fill="#FFBD3C"/>
      <path d="M73.3733 6.86773L69.5162 13.5483C69.4274 13.702 69.4801 13.8986 69.6338 13.9874C69.7876 14.0761 69.9841 14.0235 70.0729 13.8697L73.93 7.18916C74.0188 7.03543 73.9661 6.83885 73.8124 6.75009C73.6587 6.66133 73.4621 6.714 73.3733 6.86773Z" fill="white"/>
      <path d="M73.9703 6.47364C73.6632 6.29608 73.2702 6.40123 73.0927 6.70848L69.2352 13.3875C69.0578 13.6946 69.1629 14.0874 69.4699 14.2648C69.7771 14.4424 70.1701 14.3373 70.3476 14.03L74.2051 7.35095C74.3825 7.04385 74.2774 6.65112 73.9703 6.47364Z" class="line-active" fill="#FFBD3C"/>
    </svg>

    <p class="timer__txt">10</p>
  </div>
</template>

<script>
export default {
  name: 'Timer',
  props: ['dialog', 'loaded'],
  data: () => ({
    isMobile: window.innerWidth < 561,
  }),
  methods: {
    animeteTimer() {
      const block = document.querySelector('.timer'),
            count = block.querySelector('.timer__txt');

      let counter = {
        count: 0,
      }

      this.$anime({
        targets: counter,
        count: 10,
        easing: 'linear',
        round: 1,
        duration: 2000,
        delay: 1000,
        update: function() {
          count.innerHTML = counter.count;
        }
      });
    },
    animeClocker() {
      this.$anime({
        targets: '.segment__path',
        strokeDasharray: {
          value: '48 216',
          duration: 2010,
          delay: 2000,
          easing: 'linear'
        },
        easing: 'liner',
        direction: 'alternate',
        elasticity: 100,
        loop: false,
      });
    }
  },
  mounted() {},
  watch: {
    loaded() {
      if ( this.loaded && !this.isMobile ) {
        this.animeteTimer();
        this.animeClocker();
      }
    },
    dialog() {
      if ( this.dialog && this.isMobile ) {
        this.animeteTimer();
        this.animeClocker();
      }
    }
  }
}
</script>

<style lang="scss" scoped>
.timer {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 120px;
  height: 120px;

  &__txt {
    margin-right: 20px;
    font-family: 'Aldrich';
    font-size: 36px;
    line-height: 43px;
  }
}
.clock {
  position: absolute;
  left: 0; 
}
</style>
